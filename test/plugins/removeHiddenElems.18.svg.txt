Don't remove defs elements if children have descendants with IDs.

===

<svg xmlns="http://www.w3.org/2000/svg">
    <rect fill="url(#b)" width="64" height="64"/>
    <filter id="a">
        <feGaussianBlur stdDeviation="5" />
    </filter>
    <defs>
        <g style="filter:url(#a)">
            <linearGradient id="b">
                <stop offset="5%" stop-color="gold" />
            </linearGradient>
        </g>
    </defs>
</svg>

@@@

<svg xmlns="http://www.w3.org/2000/svg">
    <rect fill="url(#b)" width="64" height="64"/>
    <filter id="a">
        <feGaussianBlur stdDeviation="5"/>
    </filter>
    <defs>
        <g style="filter:url(#a)">
            <linearGradient id="b">
                <stop offset="5%" stop-color="gold"/>
            </linearGradient>
        </g>
    </defs>
</svg>